---
short: e-sparqlendpointchunkedlist
type: extractor
color: red
title: SPARQL endpoint chunked list
description: Extracts RDF triples from SPARQL endpoints based on a list of endpoints and queries to execute, and a list of entities to query for.
---

<p class="flow-text">
Extractor, allows the user to extract RDF triples from a SPARQL endpoint using a series of <a href="https://www.w3.org/TR/sparql11-query/#construct">CONSTRUCT queries</a>.
It is especially suitable for querying multiple SPARQL endpoints.
It is also suitable for bigger data, as it queries the endpoints for descriptions of a limited number of entities at once, creating a separete RDF data chunk from each query.
</p>
<dl class="flow-text">
    <dt>Number of threads to use</dt>
    <dd>Number of threads to be used for querying in total.</dd>
    <dt>Query time limit in seconds (-1 for no limit)</dt>
    <dd>Some SPARQL endpoints may hang on a query for a long time. Sometimes it is therefore desirable to limit the time waiting for an answer so that the whole pipeline execution is not stuck.</dd>
    <dt>Encode invalid IRIs</dt>
    <dd>Some SPARQL endpoints such as DBpedia contain invalid IRIs which are sent in results of SPARQL queries. Some libraries like RDF4J then can crash on those IRIs. If this is the case, choose this option to encode such invalid IRIs.</dd>
    <dt>Fix missing language tags on <code>rdf:langString</code> literals</dt>
    <dd>Some SPARQL endpoints such as DBpedia contain <code>rdf:langString</code> literals without language tags, which is invalid RDF 1.1. Some libraries like RDF4J then can crash on those literals. If this is the case, choose this option to fix this problem by replacing <code>rdf:langString</code> with <code>xsd:string</code> datatype on such literals.</dd>
</dl>
<!--more-->
<div class="row" id="characteristics">
    <h3 class="orange-text center">Characteristics</h3>
    <div class="col s12 l6">
        <dl class="flow-text">
            <dt>ID</dt>
            <dd>{{ page.short }}</dd>
            <dt>Type</dt>
            <dd>{{ page.type }}</dd>
            <dt>Inputs</dt>
            <dd>RDF single graph - Configuration</dd>
            <dd>Files - Lists of values in CSV files for each task</dd>
            <dd>RDF single graph - Tasks</dd>
            <dt>Outputs</dt>
            <dd>RDF chunked - Output</dd>
            <dd>RDF single graph - Report</dd>
            <dt>Look in pipeline</dt>
            <dd><img class="responsive-img" src="../assets/components/{{page.short}}.png" alt="{{page.title}}"></dd>
        </dl>
    </div>
    <div class="col s12 l6">
        <p class="flow-text">
            The {{page.title}} component queries a list of remote SPARQL endpoints using <a href="https://www.w3.org/TR/sparql11-query/#construct">SPARQL CONSTRUCT</a> queries.
            The typical scenarios include discovery tasks such as determining which classes are used in which endpoints, etc.
		</p>
		<p class="flow-text">
        On the Tasks input, the component expects a list of tasks specifying endpoints and queries.
        This chunked version of the component is suitable for bigger data, which needs to be queried by parts.
        The typical use case is getting descriptions of a larger number of entities of the same type, which would be too big to get in one query.
		</p>
		<p class="flow-text">
        On the Files input, the component expects CSV files containing columns with headers.
        The column headers are the names of variables, which will be used in the SPARQL queries.
        The rows then contain the list of values assigned to the variables.
        The list is split into pieces determined by the Chunk size parameter of the runtime configuratino and each piece is inserted into the query using a VALUES clause in place of the <code>${VALUES}</code> placeholder, forming one RDF data chunk on the output.
        The input list of values can be created either manually, or using the <a href="./e-sparqlendpointselect" title="SPARQL endpoint select">SPARQL endpoint select</a>, <a href="./t-sparqlselectmultiple" title="SPARQL select multiple">SPARQL select multiple</a> or <a href="./e-sparqlendpointselectscrollablecursor" title="SPARQL endpoint select scrollable cursor">SPARQL endpoint select scrollable cursor</a> components.
		</p>
		<p class="flow-text">
		The Output contains the collected results as chunks, where one Task produces multiple chunks according to the runtime configuration and the corresponding input CSV file.
		The Report output contains potential error messages encountered when querying the SPARQL endpoints.
    </div>
</div>
<div class="row" id="tasks">
<h3 class="orange-text center">Tasks specification</h3>
<p class="flow-text">Below you can see sample task specification for the component.
This task queries for a list of resources for specific classes in a given endpoint.
The list of class IRIs is given in the specified CSV file.
</p>
{% highlight turtle %}
@prefix sel: <http://plugins.linkedpipes.com/ontology/e-sparqlEndpointChunkedList#> .

<urn:uuid:0b6d0abb-5040-4511-8a05-f73d95bff5fc> a sel:Task;
  sel:chunkSize "1";
  sel:endpoint "http://sparql.reegle.info/";
  sel:fileName "http___sparql_reegle_info_.csv";
  sel:query """
PREFIX adhoc: <http://linked.opendata.cz/ontology/adhoc/>
CONSTRUCT {
?subj adhoc:resource ?resource ;
          adhoc:class ?Class ;
          adhoc:endpointUri \"http://sparql.reegle.info/\" .
} WHERE {
  {
    SELECT ?resource ?Class
    WHERE {
      ${VALUES}
      ?resource a ?Class .
    }
    LIMIT 5
  }
BIND(UUID() as ?subj)
}
""" .
{% endhighlight %}
</div>